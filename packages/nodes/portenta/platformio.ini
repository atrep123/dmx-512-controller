; PlatformIO Project Configuration for Arduino Portenta H7
;
; Dual-core configuration for M7 and M4 cores

[platformio]
default_envs = portenta_m7

[env:portenta_m7]
platform = atmelsam
board = portenta_h7_m7
framework = arduino

; M7 Core Configuration
build_flags = 
    -DCORE_CM7
    -DUSE_ETHERNET
    -DNUM_DMX_UNIVERSES=4

; Serial Monitor
monitor_speed = 115200

; Dependencies for M7
lib_deps = 
    arduino-libraries/Ethernet
    ArduinoRS485
    ArduinoJson

[env:portenta_m4]
platform = atmelsam
board = portenta_h7_m4
framework = arduino

; M4 Core Configuration
build_flags = 
    -DCORE_CM4
    -DNUM_STEPPERS=4
    -DNUM_SERVOS=8

; Dependencies for M4
lib_deps = 
    arduino-libraries/Servo
    waspmote/AccelStepper

; Upload to M4 core
upload_protocol = cmsis-dap
